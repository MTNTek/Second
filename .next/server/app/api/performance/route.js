"use strict";(()=>{var e={};e.id=996,e.ids=[996],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2462:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g});var o={};r.r(o),r.d(o,{GET:()=>m,POST:()=>u});var n=r(9303),a=r(8716),s=r(670),i=r(7070);let p={LCP:{good:2500,poor:4e3},FID:{good:100,poor:300},CLS:{good:.1,poor:.25},FCP:{good:1800,poor:3e3},TTFB:{good:800,poor:1800}},l=[];async function u(e){try{let{metrics:t,url:r,connection:o}=await e.json();if(!t||!Array.isArray(t))return i.NextResponse.json({error:"Invalid metrics data"},{status:400});let n=t.map(e=>({name:e.name,value:parseFloat(e.value)||0,rating:function(e,t){let r=p[e];return!r||t<=r.good?"good":t<=r.poor?"needs-improvement":"poor"}(e.name,parseFloat(e.value)||0),timestamp:Date.now()})),a={timestamp:new Date().toISOString(),url:r||e.url,userAgent:e.headers.get("user-agent")||"unknown",metrics:n,connection:o||{}};l.push(a),l.length>1e3&&l.shift();let s=n.filter(e=>"poor"===e.rating);return s.length>0&&console.warn("Poor performance detected:",{url:a.url,poorMetrics:s.map(e=>`${e.name}: ${e.value}`)}),i.NextResponse.json({success:!0,processed:n.length,timestamp:a.timestamp})}catch(e){return console.error("Performance tracking error:",e),i.NextResponse.json({error:"Failed to process performance data"},{status:500})}}async function m(e){try{let{searchParams:t}=new URL(e.url),r=parseInt(t.get("limit")||"50"),o=t.get("metric"),n=l.slice(-r);o&&(n=n.map(e=>({...e,metrics:e.metrics.filter(e=>e.name===o)})).filter(e=>e.metrics.length>0));let a=function(e){if(0===e.length)return{totalReports:0,averageMetrics:{},ratingDistribution:{}};let t={},r={};e.forEach(e=>{e.metrics.forEach(e=>{t[e.name]||(t[e.name]=[],r[e.name]={good:0,"needs-improvement":0,poor:0}),t[e.name].push(e.value),r[e.name][e.rating]++})});let o={};return Object.keys(t).forEach(e=>{let r=t[e];o[e]=Math.round(r.reduce((e,t)=>e+t,0)/r.length)}),{totalReports:e.length,averageMetrics:o,ratingDistribution:r,timeRange:{start:e[0]?.timestamp,end:e[e.length-1]?.timestamp}}}(l);return i.NextResponse.json({summary:a,reports:n,totalReports:l.length,lastUpdated:l.length>0?l[l.length-1].timestamp:null})}catch(e){return console.error("Performance data retrieval error:",e),i.NextResponse.json({error:"Failed to retrieve performance data"},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/performance/route",pathname:"/api/performance",filename:"route",bundlePath:"app/api/performance/route"},resolvedPagePath:"C:\\dev\\Second\\app\\api\\performance\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:g,serverHooks:h}=c,f="/api/performance/route";function v(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[276,972],()=>r(2462));module.exports=o})();